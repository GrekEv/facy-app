# Настройка DNS для домена onlyface.art

## Конфигурация

- Домен: onlyface.art
- Регистратор: reg.ru
- IP сервера: 72.56.85.215
- Сервер: https://timeweb.cloud/my/servers/6096221

## Настройка DNS в Timeweb

### Подключение домена

1. Откройте https://timeweb.cloud/
2. Перейдите в "Домены и SSL"
3. Нажмите "Добавить домен"
4. Введите: onlyface.art
5. Выберите: "Домен зарегистрирован у другого регистратора"
6. Скопируйте DNS-серверы от Timeweb

### Настройка DNS-серверов в reg.ru

1. Откройте https://www.reg.ru/
2. Перейдите в "Домены" → onlyface.art → "DNS-серверы и управление зоной"
3. Измените DNS-серверы на серверы Timeweb
4. Сохраните

Изменение DNS-серверов может занять до 24-48 часов.

### Добавление A-записей в Timeweb

1. "Домены и SSL" → onlyface.art
2. Вкладка "DNS-записи" или "DNS"
3. Нажмите "Добавить запись"

Запись 1:
- Тип: A
- Имя: @ (или пусто)
- Значение: 72.56.85.215

Запись 2:
- Тип: A
- Имя: www
- Значение: 72.56.85.215

## Настройка DNS в reg.ru

Если используете DNS-серверы reg.ru:

1. reg.ru → "Домены" → onlyface.art → "DNS-серверы и управление зоной"
2. Перейдите в "Ресурсные записи"
3. Добавьте A-записи:
   - @ → 72.56.85.215
   - www → 72.56.85.215

## Проверка DNS

```bash
dig +short onlyface.art @8.8.8.8
dig +short www.onlyface.art @8.8.8.8
```

Оба должны вернуть: 72.56.85.215

## После настройки DNS

```bash
ssh root@72.56.85.215
cd ~/facy-app
chmod +x setup_domain_onlyface.sh
./setup_domain_onlyface.sh
```

Скрипт настроит Nginx, получит SSL сертификат, обновит .env файл и настроит firewall.

## Проблемы

### DNS записи не обновляются

- Проверьте DNS-серверы в reg.ru
- Проверьте записи в Timeweb
- Подождите до 24-48 часов для DNS-серверов, 5-15 минут для записей

### Не удается получить SSL сертификат

- Проверьте, что DNS указывает на 72.56.85.215
- Проверьте, что порты 80 и 443 открыты
- Получите сертификат вручную:
  ```bash
  sudo certbot --nginx -d onlyface.art -d www.onlyface.art
  ```

### Домен не открывается

- Проверьте приложение: `docker compose ps`
- Проверьте логи Nginx: `sudo tail -f /var/log/nginx/error.log`
- Проверьте порт 8000: `netstat -tlnp | grep 8000`
