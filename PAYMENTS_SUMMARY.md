# üí≥ –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π Facy - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Transaction** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã
- ‚úÖ **PromoCode** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∏ —Å–∫–∏–¥–æ–∫
- ‚úÖ **PaymentMethod** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **Withdrawal** - —Å–∏—Å—Ç–µ–º–∞ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ **Report** - —Å–∏—Å—Ç–µ–º–∞ –∂–∞–ª–æ–± –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ **AuditLog** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **RateLimit** - —Å–∏—Å—Ç–µ–º–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. –°–µ—Ä–≤–∏—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ **PaymentService** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ Telegram Payments
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π (BTC, ETH, USDT)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π

### 3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –±–æ—Ç–µ
- ‚úÖ **handlers/payments.py** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
  - –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã
  - Telegram Payments
  - –ö—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–∏
  - –ö–∞—Ä—Ç—ã (Visa/Mir) - –≥–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å YooKassa
  - Google Pay / Samsung Pay - –≥–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ Stripe

### 4. API endpoints
- ‚úÖ **api/payments.py** - REST API –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
  - POST `/api/payments/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
  - POST `/api/payments/verify-crypto` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–∞
  - GET `/api/payments/status/{transaction_id}` - —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
  - Webhook endpoints –¥–ª—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–∏—Å—Å–∏–π –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
1. **Telegram Payments** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ BotFather
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ `.env`

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):
1. **YooKassa** - –¥–ª—è Visa/Mir (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `yookassa`)
2. **Stripe** - –¥–ª—è Google Pay/Samsung Pay (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `stripe`)
3. **–ö—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–∏** - —Å–æ–∑–¥–∞–π—Ç–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è BTC, ETH, USDT
4. **Blockchain API** - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π

---

## üìã –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```env
# –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id
YOOKASSA_SECRET_KEY=–≤–∞—à_secret_key

# –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞
CRYPTO_WALLET_ADDRESS_BTC=–≤–∞—à_btc_–∞–¥—Ä–µ—Å
CRYPTO_WALLET_ADDRESS_ETH=–≤–∞—à_eth_–∞–¥—Ä–µ—Å
CRYPTO_WALLET_ADDRESS_USDT=–≤–∞—à_usdt_–∞–¥—Ä–µ—Å
CRYPTO_API_KEY=–≤–∞—à_api_–∫–ª—é—á

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
MIN_WITHDRAWAL=100.0
WITHDRAWAL_FEE_PERCENT=5.0
REFERRAL_COMMISSION_PERCENT=50.0
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram Payments:**
   - BotFather ‚Üí Payments ‚Üí Configure
   - –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

2. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `PAYMENTS_SETUP.md`

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   ```bash
   pip install stripe yookassa blockcypher
   ```

4. **–°–æ–∑–¥–∞–π—Ç–µ –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—å–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   - Bitcoin, Ethereum, USDT

5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ ‚Üí –ë–∞–ª–∞–Ω—Å ‚Üí –ö—É–ø–∏—Ç—å –ø–æ–∏–Ω—Ç—ã
   - –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- **[PAYMENTS_SETUP.md](PAYMENTS_SETUP.md)** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –≤ Git
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. **Webhook:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS –¥–ª—è webhook –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –ë–î

---

**–°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üí≥

