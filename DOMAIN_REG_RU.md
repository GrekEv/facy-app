# ðŸŒ ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð¾Ð¼ÐµÐ½Ð° Ñ reg.ru Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ Yandex Cloud

## ðŸ“‹ Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ

1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ DNS Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð° reg.ru
2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Nginx Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
3. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ (Let's Encrypt)
4. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

---

## Ð¨Ð°Ð³ 1: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° DNS Ð½Ð° reg.ru

### 1.1. Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ reg.ru

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ https://www.reg.ru
2. Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ°Ð±Ð¸Ð½ÐµÑ‚
3. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» **"ÐœÐ¾Ð¸ Ð´Ð¾Ð¼ÐµÐ½Ñ‹"**
4. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½ Ð¸ Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ **"Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ"**

### 1.2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ DNS Ð·Ð°Ð¿Ð¸ÑÐ¸

**Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ A: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ DNS ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² reg.ru (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)**

1. Ð’ Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ **"DNS-ÑÐµÑ€Ð²ÐµÑ€Ñ‹"** ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ DNS ÑÐµÑ€Ð²ÐµÑ€Ñ‹ reg.ru:
   - `ns1.reg.ru`
   - `ns2.reg.ru`
   - (Ð¸Ð»Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ, Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ reg.ru)

2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» **"DNS-Ð·Ð°Ð¿Ð¸ÑÐ¸"** Ð¸Ð»Ð¸ **"Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ DNS"**

3. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ/Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸:

   **A-Ð·Ð°Ð¿Ð¸ÑÑŒ Ð´Ð»Ñ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ð°:**
   - **Ð¢Ð¸Ð¿:** `A`
   - **Ð˜Ð¼Ñ/ÐŸÐ¾Ð´Ð´Ð¾Ð¼ÐµÐ½:** `@` (Ð¸Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð³Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ð°)
   - **Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ/IP:** `158.160.96.182`
   - **TTL:** `3600` (Ð¸Ð»Ð¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ)

   **A-Ð·Ð°Ð¿Ð¸ÑÑŒ Ð´Ð»Ñ www:**
   - **Ð¢Ð¸Ð¿:** `A`
   - **Ð˜Ð¼Ñ/ÐŸÐ¾Ð´Ð´Ð¾Ð¼ÐµÐ½:** `www`
   - **Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ/IP:** `158.160.96.182`
   - **TTL:** `3600`

4. **Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ**

**Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ B: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²Ð½ÐµÑˆÐ½Ð¸Ñ… DNS ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²**

Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ DNS ÑÐµÑ€Ð²ÐµÑ€Ñ‹ Yandex Cloud:

1. Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Yandex Cloud ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ DNS Ð·Ð¾Ð½Ñƒ:
   - **Cloud DNS** â†’ **Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð¾Ð½Ñƒ**
   - **Ð˜Ð¼Ñ Ð·Ð¾Ð½Ñ‹:** `Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½-zone`
   - **Ð”Ð¾Ð¼ÐµÐ½:** `Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru`
   - **Ð¢Ð¸Ð¿:** ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð°Ñ

2. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ NS-ÑÐµÑ€Ð²ÐµÑ€Ñ‹ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: `ns1.yandexcloud.net`, `ns2.yandexcloud.net`)

3. Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ reg.ru:
   - ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² **"DNS-ÑÐµÑ€Ð²ÐµÑ€Ñ‹"**
   - Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ **"Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ DNS-ÑÐµÑ€Ð²ÐµÑ€Ñ‹"**
   - Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ NS-ÑÐµÑ€Ð²ÐµÑ€Ñ‹ Ð¾Ñ‚ Yandex Cloud
   - Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ

4. Ð’ Ð·Ð¾Ð½Ðµ Cloud DNS ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ A-Ð·Ð°Ð¿Ð¸ÑÑŒ:
   - **Ð˜Ð¼Ñ:** `@`
   - **Ð¢Ð¸Ð¿:** `A`
   - **Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:** `158.160.96.182`
   - **TTL:** `3600`

### 1.3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° DNS

ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ 5-15 Ð¼Ð¸Ð½ÑƒÑ‚ Ð´Ð»Ñ Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ DNS Ð·Ð°Ð¿Ð¸ÑÐµÐ¹, Ð·Ð°Ñ‚ÐµÐ¼ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° A-Ð·Ð°Ð¿Ð¸ÑÐ¸
dig Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru +short
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ: 158.160.96.182

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° www
dig www.Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru +short
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ: 158.160.96.182

# Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½ ÑÐµÑ€Ð²Ð¸ÑÑ‹:
# https://dnschecker.org
# https://www.whatsmydns.net
```

---

## Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Nginx Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ

### 2.1. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ

```bash
ssh ubuntu@158.160.96.182
```

### 2.2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Nginx

```bash
sudo apt update
sudo apt install -y nginx
```

### 2.3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ Nginx

**Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ `Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru` Ð½Ð° Ð²Ð°Ñˆ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð´Ð¾Ð¼ÐµÐ½!**

```bash
cd ~/facy-app

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
sudo tee /etc/nginx/sites-available/facy > /dev/null <<'EOF'
server {
    listen 80;
    server_name Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru www.Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru;

    client_max_body_size 100M;

    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    location /static/ {
        alias /home/ubuntu/facy-app/static/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
    
    location /uploads/ {
        alias /home/ubuntu/facy-app/uploads/;
        expires 7d;
        add_header Cache-Control "public";
    }
    
    location /generated/ {
        alias /home/ubuntu/facy-app/generated/;
        expires 7d;
        add_header Cache-Control "public";
    }

    location /health {
        proxy_pass http://localhost:8000/health;
        access_log off;
    }
}
EOF

# Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru Ð½Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð´Ð¾Ð¼ÐµÐ½
# Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½ Ð·Ð´ÐµÑÑŒ:
DOMAIN="Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru"  # Ð—ÐÐœÐ•ÐÐ˜Ð¢Ð• ÐÐ Ð’ÐÐ¨ Ð”ÐžÐœÐ•Ð!
sudo sed -i "s/Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½\.ru/$DOMAIN/g" /etc/nginx/sites-available/facy

# ÐÐºÑ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
sudo ln -sf /etc/nginx/sites-available/facy /etc/nginx/sites-enabled/
sudo rm -f /etc/nginx/sites-enabled/default

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
sudo nginx -t

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Nginx
sudo systemctl restart nginx
sudo systemctl enable nginx
```

### 2.4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ HTTP

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
curl -I http://localhost

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ð° (Ð¿Ð¾ÑÐ»Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ DNS)
curl -I http://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

---

## Ð¨Ð°Ð³ 3: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð° (HTTPS)

### 3.1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Certbot

```bash
sudo apt install -y certbot python3-certbot-nginx
```

### 3.2. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚

**âš ï¸ Ð’Ð°Ð¶Ð½Ð¾:** Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ DNS Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹ Ð¸ Ð´Ð¾Ð¼ÐµÐ½ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° `158.160.96.182`!

```bash
# Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½ Ð¸ email
DOMAIN="Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru"  # Ð—ÐÐœÐ•ÐÐ˜Ð¢Ð•!
EMAIL="Ð²Ð°Ñˆ-email@example.com"  # Ð—ÐÐœÐ•ÐÐ˜Ð¢Ð•!

# ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°
sudo certbot --nginx -d $DOMAIN -d www.$DOMAIN \
    --non-interactive \
    --agree-tos \
    --email $EMAIL \
    --redirect
```

**Ð•ÑÐ»Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸**, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼:

```bash
sudo certbot --nginx -d Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru -d www.Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

Certbot Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸:
- ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ Ð¾Ñ‚ Let's Encrypt
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ Nginx Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ HTTPS
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿ÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ HTTP Ð½Ð° HTTPS

### 3.3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ

```bash
# Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ
sudo certbot renew --dry-run
```

Ð¡ÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒÑÑ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 90 Ð´Ð½ÐµÐ¹.

---

## Ð¨Ð°Ð³ 4: ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

### 4.1. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ WEBAPP_URL Ð² .env

```bash
cd ~/facy-app
nano .env
```

ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ ÑÑ‚Ñ€Ð¾ÐºÑƒ `WEBAPP_URL` Ð¸ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð°:

```env
WEBAPP_URL=https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» (Ctrl+O, Enter, Ctrl+X).

### 4.2. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ

```bash
docker compose -f docker-compose.prod.yml down
docker compose -f docker-compose.prod.yml up -d
```

---

## Ð¨Ð°Ð³ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Telegram Ð±Ð¾Ñ‚Ð°

### 5.1. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Menu Button Ð² BotFather

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ [@BotFather](https://t.me/BotFather) Ð² Telegram
2. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ `/mybots`
3. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð°
4. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ **"Bot Settings"** â†’ **"Menu Button"**
5. Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ **"Menu Button"**
6. Ð’ Ð¿Ð¾Ð»Ðµ **"URL"** Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ: `https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru`
7. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"Save"**

---

## âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° 1: HTTP Ð´Ð¾ÑÑ‚ÑƒÐ¿

```bash
curl -I http://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ ÐºÐ¾Ð´ `301` (Ð¿ÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð° HTTPS) Ð¸Ð»Ð¸ `200`.

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° 2: HTTPS Ð´Ð¾ÑÑ‚ÑƒÐ¿

```bash
curl -I https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ ÐºÐ¾Ð´ `200 OK`.

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° 3: API Health

```bash
curl https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru/health
```

Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ: `{"status":"healthy"}`

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° 4: ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ

ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ: `https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru`

Ð”Ð¾Ð»Ð¶Ð½Ð° Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒÑÑ Ð³Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.

---

## ðŸš€ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° (ÑÐºÑ€Ð¸Ð¿Ñ‚)

Ð”Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚:

```bash
# ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ
cd ~/facy-app
curl -fsSL https://raw.githubusercontent.com/Ð²Ð°Ñˆ-Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹/main/setup_domain.sh | bash
```

Ð˜Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ (ÑÐ¼. `setup_domain_regru.sh`)

---

## ðŸ› Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: DNS Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:**
1. ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ IP Ð°Ð´Ñ€ÐµÑÐ° Ð² DNS Ð·Ð°Ð¿Ð¸ÑÑÑ… (`158.160.96.182`)
2. Ð’Ñ€ÐµÐ¼Ñ Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ DNS (Ð¼Ð¾Ð¶ÐµÑ‚ Ð·Ð°Ð½ÑÑ‚ÑŒ Ð´Ð¾ 24 Ñ‡Ð°ÑÐ¾Ð², Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ 5-15 Ð¼Ð¸Ð½ÑƒÑ‚)
3. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ: https://dnschecker.org

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° DNS
dig Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru +short
nslookup Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Nginx Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ 502 Bad Gateway

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾ Ð¸Ð»Ð¸ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 8000

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
docker compose -f docker-compose.prod.yml ps

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸
docker compose -f docker-compose.prod.yml logs api

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
docker compose -f docker-compose.prod.yml restart
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ñ‹:**
1. DNS Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð¸Ð»Ð¸ Ð½Ðµ Ñ€Ð°ÑÐ¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½Ð¸Ð»ÑÑ
2. ÐŸÐ¾Ñ€Ñ‚ 80 Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½
3. Ð”Ð¾Ð¼ÐµÐ½ ÑƒÐ¶Ðµ Ð¸Ð¼ÐµÐµÑ‚ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ DNS
dig Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru +short

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚Ð° 80
sudo netstat -tlnp | grep :80

# ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ standalone Ñ€ÐµÐ¶Ð¸Ð¼
sudo certbot certonly --standalone -d Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð”Ð¾Ð¼ÐµÐ½ Ð½Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:**
1. DNS Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾
2. Nginx Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½: `sudo systemctl status nginx`
3. ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ: `sudo nginx -t`
4. Firewall Ñ€Ð°Ð·Ñ€ÐµÑˆÐ°ÐµÑ‚ Ð¿Ð¾Ñ€Ñ‚Ñ‹ 80 Ð¸ 443

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Nginx
sudo systemctl status nginx

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
sudo nginx -t

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²
sudo tail -f /var/log/nginx/error.log

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° firewall
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw status
```

---

## ðŸ“ ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Nginx
sudo systemctl status nginx

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Nginx
sudo systemctl restart nginx

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
sudo nginx -t

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Nginx
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°
sudo certbot certificates

# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°
sudo certbot renew

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° DNS
dig Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru +short
nslookup Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru
```

---

## âœ… Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!

ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð²ÑÐµÑ… ÑˆÐ°Ð³Ð¾Ð² Ð²Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ:

- ðŸŒ **HTTPS:** `https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.ru`
- ðŸ”’ **SSL:** ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ
- ðŸ“± **Telegram Bot:** ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð´Ð¾Ð¼ÐµÐ½Ð¾Ð¼

**Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸:**
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Menu Button Ð² BotFather
3. ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð±Ð¾Ñ‚Ð° Ð² Telegram

